<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will you be my Valentine?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            overflow: hidden; /* Prevent scrollbars when button moves */
            touch-action: manipulation; /* Improves touch response */
        }
        h1, .romantic-font {
            font-family: 'Pacifico', cursive;
        }
        
        /* Floating Hearts Animation Background */
        .heart-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
            pointer-events: none;
        }
        .heart-icon {
            position: absolute;
            bottom: -10vh;
            color: rgba(255, 255, 255, 0.3);
            animation: floatUp 10s linear infinite;
            font-size: 2rem;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.5; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }

        /* Button transition for smooth sliding movement */
        #noBtn {
            transition: transform 0.1s ease-out; 
        }
        
        /* Pulse animation for the Yes button */
        .pulse-heart {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Spin animation for the final picture */
        .spin-click {
            animation: spinAround 0.6s ease-in-out;
        }
        @keyframes spinAround {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-300 via-purple-300 to-indigo-300 h-screen w-screen flex flex-col justify-center items-center select-none">

    <!-- Background Hearts -->
    <div id="heartContainer" class="heart-bg"></div>

    <!-- Main Content Card -->
    <div id="mainCard" class="bg-white/80 backdrop-blur-sm p-8 rounded-3xl shadow-2xl text-center max-w-md w-full mx-4 relative z-10 border-4 border-white">
        
        <!-- Cute GIF or Image placeholder -->
        <div class="mb-6">
            <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3R6bW53YnF6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/cLS1cfxvGOPVpf9g3y/giphy.gif" 
                 alt="Cute Bear" 
                 class="w-40 h-40 mx-auto object-contain rounded-full border-4 border-pink-200 shadow-lg"
                 onerror="this.src='https://placehold.co/150x150/ffb6c1/ffffff?text=U+R+Cute'">
        </div>

        <h1 class="text-3xl md:text-5xl text-pink-600 mb-8 drop-shadow-sm">Will you be my Valentine?</h1>

        <div class="flex flex-row gap-4 justify-center items-center relative w-full z-20">
            
            <!-- Yes Button -->
            <button id="yesBtn" onclick="handleYes()" class="pulse-heart bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 md:py-3 md:px-8 rounded-full text-lg md:text-xl shadow-lg transform transition-all hover:scale-110">
                Yes! üíñ
            </button>

            <!-- No Button -->
            <!-- Added preventDefault to touch events -->
            <button id="noBtn" onmouseover="moveButton(event)" ontouchstart="moveButton(event)" class="bg-red-400 text-white font-bold py-2 px-6 md:py-3 md:px-8 rounded-full text-lg md:text-xl shadow-lg cursor-not-allowed">
                No üò¢
            </button>
        </div>
    </div>

    <!-- Success Message (Hidden by default) -->
    <div id="successMessage" class="hidden flex-col items-center justify-center text-center z-50 animate-bounce">
        <h1 class="text-4xl md:text-7xl text-white font-bold mb-4 drop-shadow-lg romantic-font">YAY! I knew it! ‚ù§Ô∏è</h1>
        <p class="text-xl md:text-3xl text-white font-semibold px-4 mb-8">Love you bubu, happy Valentines!</p>
        
        <!-- 
           IMPORTANT: Upload a photo named 'us.jpg' to your repository 
           in the same folder as this index.html file! 
        -->
        <img src="us.jpg" 
             onclick="spinImage(this)"
             alt="Us together" 
             class="w-64 h-64 object-cover rounded-2xl border-4 border-white shadow-2xl transform rotate-3 hover:rotate-0 transition duration-300 cursor-pointer"
             onerror="this.src='https://placehold.co/300x300/ffb6c1/ffffff?text=Upload+us.jpg'">
    </div>

    <script>
        // --- Logic for the "Run Away" Button ---
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const mainCard = document.getElementById('mainCard');
        const successMessage = document.getElementById('successMessage');

        // Track the accumulated distance the button has moved
        let currentX = 0;
        let currentY = 0;

        function moveButton(e) {
            // Prevent default touch behavior (like scrolling) if triggered by touch
            if(e && e.type === 'touchstart') {
                e.preventDefault();
            }

            // Get viewport dimensions
            const winWidth = window.innerWidth;
            const winHeight = window.innerHeight;
            const isMobile = winWidth < 768; // Check if mobile

            // Adjust parameters based on device
            // Mobile gets smaller jumps and buffers to stay on screen
            // INCREASED movement amounts significantly
            const moveAmount = isMobile ? 300 : 600; 
            const minMove = isMobile ? 100 : 200;
            const padding = isMobile ? 20 : 30; // Safety buffer between buttons
            const edgeBuffer = isMobile ? 20 : 50; // Keep away from screen edges

            // Get current positions
            const yesRect = yesBtn.getBoundingClientRect();
            const noRect = noBtn.getBoundingClientRect();

            // Try to find a valid spot 20 times (prevents infinite loops)
            for (let i = 0; i < 20; i++) {
                // Randomly pick a direction: 1 for positive, -1 for negative
                const dirX = Math.random() < 0.5 ? -1 : 1;
                const dirY = Math.random() < 0.5 ? -1 : 1;

                // Calculate proposed new offsets
                let moveX = (Math.random() * moveAmount + minMove) * dirX;
                let moveY = (Math.random() * moveAmount + minMove) * dirY;

                // Predict where the button would end up on screen
                const newLeft = noRect.left + moveX;
                const newTop = noRect.top + moveY;
                const newRight = newLeft + noRect.width;
                const newBottom = newTop + noRect.height;

                // 1. Check Window Boundaries (with edgeBuffer)
                // Ensures button stays completely inside the visible area
                if (newLeft < edgeBuffer || 
                    newRight > winWidth - edgeBuffer ||
                    newTop < edgeBuffer || 
                    newBottom > winHeight - edgeBuffer) {
                    continue; // Try again
                }

                // 2. Check Collision with Yes Button (with padding)
                // If the new position overlaps the Yes button box + padding, try again
                if (!(newLeft > yesRect.right + padding || 
                      newRight < yesRect.left - padding || 
                      newTop > yesRect.bottom + padding || 
                      newBottom < yesRect.top - padding)) {
                    continue; // Overlap detected, try again
                }

                // If we get here, the move is valid!
                currentX += moveX;
                currentY += moveY;
                
                // Apply the new position via CSS transform. 
                noBtn.style.transform = `translate(${currentX}px, ${currentY}px)`;
                return; // Stop trying
            }
        }

        // Add click event listener just in case they manage to click it (fast fingers!)
        noBtn.addEventListener('click', function(e) {
            e.preventDefault();
            moveButton(e);
        });

        // --- Logic for the "Yes" Button ---
        function handleYes() {
            // Hide the main card
            mainCard.style.display = 'none';
            // Hide the running button
            noBtn.style.display = 'none';
            
            // Show success message
            successMessage.classList.remove('hidden');
            successMessage.classList.add('flex');
            
            // Trigger Confetti
            startConfetti();
        }

        // --- Background Floating Hearts Logic ---
        function createHearts() {
            const container = document.getElementById('heartContainer');
            const heartCount = 20;

            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-icon');
                heart.innerHTML = '‚ù§';
                
                // Randomize position and animation delay
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                heart.style.fontSize = (Math.random() * 2 + 1) + 'rem';
                
                container.appendChild(heart);
            }
        }

        // --- Simple Confetti Effect for "Yes" ---
        function startConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.left = '50%';
                confetti.style.top = '50%';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.zIndex = '100';
                document.body.appendChild(confetti);

                // Animate confetti explosion
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 10 + 5;
                const dx = Math.cos(angle) * velocity;
                const dy = Math.sin(angle) * velocity;
                
                let x = window.innerWidth / 2;
                let y = window.innerHeight / 2;
                
                let opacity = 1;

                const animate = () => {
                    x += dx;
                    y += dy + 2; // Gravity
                    opacity -= 0.02;
                    
                    confetti.style.left = x + 'px';
                    confetti.style.top = y + 'px';
                    confetti.style.opacity = opacity;

                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        confetti.remove();
                    }
                };
                requestAnimationFrame(animate);
            }
        }

        // Initialize background hearts
        createHearts();

        // --- Logic for Image Spin ---
        function spinImage(img) {
            img.classList.add('spin-click');
            // Remove the class after animation ends so it can be clicked again
            setTimeout(() => {
                img.classList.remove('spin-click');
            }, 600);
        }

    </script>
</body>
</html>
